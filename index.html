<!doctype html>
<html lang="uk">
  <head>
    <meta charset="utf-8" />
    <title>Відкриваємо Viber…</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="noindex, nofollow" />
    <script>
      (function () {
        // === SET YOUR NUMBER HERE (digits only, E.164 without "+") ===
        const E164_NUMBER = "380979351325"; // ← change if needed
        // =============================================================

        // Build deeplink(s)
        const num = String(E164_NUMBER).replace(/\D/g, ""); // keep digits only
        const CHAT_URI = "viber://chat?number=" + num; // commonly used personal chat link
        const ADD_URI  = "viber://add?number="  + num; // legacy/alt scheme used by some clients

        // Fallbacks
        const IOS_STORE     = "https://apps.apple.com/app/id382617920";
        const ANDROID_STORE = "https://play.google.com/store/apps/details?id=com.viber.voip";
        const DESKTOP_DL    = "https://www.viber.com/en/download/";

        // Platform detect (rough)
        const UA = navigator.userAgent;
        const isAndroid = /Android/i.test(UA);
        const isiOSClassic = /iPhone|iPad|iPod/i.test(UA);
        const isiPadOS = /Macintosh/i.test(UA) && navigator.maxTouchPoints > 2;
        const isIOS = isiOSClassic || isiPadOS;
        const isMobile = isAndroid || isIOS;

        // Cancel fallbacks if the page loses visibility (user switched to Viber)
        let jumped = false;
        document.addEventListener("visibilitychange", () => {
          if (document.visibilityState === "hidden") jumped = true;
        });

        // Try to open the app immediately
        function go(uri) {
          try { window.location.href = uri; } catch (e) {}
        }

        // Attempt chat link, then (quickly) add link for older clients
        go(CHAT_URI);
        setTimeout(() => go(ADD_URI), 500);

        // After a short delay, if we're still here, send to the right store/desktop download
        setTimeout(() => {
          if (jumped) return; // app likely opened
          if (isAndroid)      window.location.href = ANDROID_STORE;
          else if (isIOS)     window.location.href = IOS_STORE;
          else                window.location.href = DESKTOP_DL;
        }, 1600);
      })();
    </script>
    <style>html,body{height:100%;margin:0}</style>
  </head>
  <body>
    <!-- No UI. Autoredirect only. Minimal fallbacks below for very old browsers: -->
    <noscript>
      <meta http-equiv="refresh" content="0; url=viber://chat?number=380979351325">
      <p>Якщо сторінка не відкрила Viber автоматично, спробуйте <a href="viber://chat?number=380979351325">натиснути тут</a> або встановіть Viber.</p>
    </noscript>
  </body>
</html>


